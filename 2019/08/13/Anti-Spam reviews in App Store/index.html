<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Anti Spam reviews in App store · Tech blog of Unicooo</title><meta name="description" content="Anti Spam reviews in App store - Unicooo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"></head><body><div id="mask" style="display: none;"><img id="mask-image" src="#" style=" "></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="https://www.enginego.org" target="_blank" class="nav-list-link">编程基础</a></li><li class="nav-list-item"><a href="https://github.com/Windsooon" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Anti Spam reviews in App store</h1><div class="post-time">Aug 13, 2019</div><div class="post-content"><p>Back to the 1980s, the NLP systems still based on complex sets of hand-written rules. These rules become hard to maintain since it grows exponential depend on the length of sentences. Moreover, new words pop up every day so we also have to maintain the old roles before developing any new one. Most important, we can’t use these rules on other languages since the rules are languages-specify.<br>With the power of the modern computer, we tried machine learning algorithms like decision trees to replace some of the hand-written rules. As we gain more and more data, we start using statistical models like hidden markov models to predict the probability of the word depends on the input data. Nowadays, with the help from the deep neural network, <strong>word embeddings</strong> help us to convert a word from higher dimension space to a lower one. </p>
<a id="more"></a>
<h3 id="Spam-reviews-problem"><a href="#Spam-reviews-problem" class="headerlink" title="Spam reviews problem"></a>Spam reviews problem</h3><p>The spam reviews problem in China’s app store is serious. With my observation, more than 40% of customer reviews are not helpful. most of them just random words, spam, ads, unrelated contents or mean reviews which didn’t help users or the application itself. I don’t know why Apple choose to ignore this problem since the ranking of the app mostly depends on its rankings. We can also find other similar problems like amazon fake reviews or Taobao fake reviews.</p>
<h3 id="Problem-Statement"><a href="#Problem-Statement" class="headerlink" title="Problem Statement"></a>Problem Statement</h3><p>I try to solve a general problem, how to find useful reviews and how to detect spam or fake reviews. This problem also exists in other country’s app store, but since China is a big market, so it looks more obvious. In this project, I’m going to use hybrid algorithms to detect the useful reviews.</p>
<h3 id="Datasets-and-Inputs"><a href="#Datasets-and-Inputs" class="headerlink" title="Datasets and Inputs"></a>Datasets and Inputs</h3><p>The datasets contain 13000 customer reviews from the Apple review API,<br>each data point includes a username, rankings, title, and review.<br>The customer reviews come from top 5 free applications from 6 different categories in China’s app store. Each application includes 400 data points, 200 of them from most recent reviews and the left from most helpful reviews. I labeled all the customer reviews as useful or useless.</p>
<h3 id="Solution-Statement"><a href="#Solution-Statement" class="headerlink" title="Solution Statement"></a>Solution Statement</h3><p>In this section, I want to discuss what kind of reviews should be considered useless.</p>
<h4 id="The-review-is-too-short"><a href="#The-review-is-too-short" class="headerlink" title="The review is too short"></a>The review is too short</h4><p>When a review is too short, It didn’t provide enough information for the user. For instance, reviews like these didn’t help, because they didn’t provide the reason why they like or hate the application.</p>
<pre><code>&quot;喜欢&quot; （I like it)
&quot;不错&quot;  (Nice app)
&quot;下载用不了&quot;（Can&apos;t use it after downloaded)
</code></pre><p>Even though this review was written by a real user, but we choose to ignore it.</p>
<h4 id="The-review-is-too-long"><a href="#The-review-is-too-long" class="headerlink" title="The review is too long"></a>The review is too long</h4><p>Usually, users would not take too much time to read a single review. Second, <strong>If you look at the </strong>most useful reviews<strong> display by Apple, you would found most of them are a super long sentence (more than 200 words)</strong> which means Apple use the length of reviews to identify the quality of the reviews heavily. Unfortunately, spammer also noticed this. A spammer can type in lots of random words and a 5-star ranking to let an application gets a better score. Example below</p>
<p>“比寂寞更多的人和人和事情的不同在于不懂你说话了？？不会有一个人说你会让孩子更坚强……不知道是不是真的没有办法了？我们可以接受现实生活”（Random words)</p>
<h4 id="Grammatical-errors"><a href="#Grammatical-errors" class="headerlink" title="Grammatical errors"></a>Grammatical errors</h4><p>Sometimes the review has lots of grammatical errors so the user doesn’t understand what the review means. We can calculate the probability of the part of speech from the review by using POS transition matrix. In the meantime, we can also solve random words problem with this algorithm.</p>
<h4 id="Ads"><a href="#Ads" class="headerlink" title="Ads"></a>Ads</h4><p>Ads about gambling are everywhere, we can use Bayes algorithm to detect these ads. </p>
<h3 id="Benchmark-Model"><a href="#Benchmark-Model" class="headerlink" title="Benchmark Model"></a>Benchmark Model</h3><p>Since we use several algorithms here, I choose to benchmark the model by comparing the final hybrid algorithms with the one only use POS transition matrix or Bayes algorithm.</p>
<h3 id="Evaluation-Metrics"><a href="#Evaluation-Metrics" class="headerlink" title="Evaluation Metrics"></a>Evaluation Metrics</h3><p>F1 score, Accuracy score, Precision score, Recall score to be used to quantify the performance of the model</p>
<h3 id="Project-Design"><a href="#Project-Design" class="headerlink" title="Project Design"></a>Project Design</h3><ol>
<li><p>Data collection<br>I collected all the data from the Apple Review API, </p>
<pre><code>https://itunes.apple.com/cn/rss/customerreviews/id={0}/sortBy=mostRecent/page={1}/json
</code></pre></li>
<li><p>Data label<br>I labeled 13000 reviews by myself. After that, I did a little trick here.<br>for all reviews, I calculated their Jaccard similarity between each other. If some of the reviews have more than 80% similarity. (At the end of the project, I found I can use SVD to speed up the process.) I  assume that both of them are spam review, then mark both of them as useless. </p>
</li>
</ol>
<h3 id="Detection"><a href="#Detection" class="headerlink" title="Detection"></a>Detection</h3><h4 id="Random-guess"><a href="#Random-guess" class="headerlink" title="Random guess"></a>Random guess</h4><p>The first method is a random guess, we guess all the review is useful.<br><img src="https://raw.githubusercontent.com/Windsooon/Comments/master/img/random_guess.png" alt="random guess"></p>
<h4 id="The-review-is-too-short-or-too-long"><a href="#The-review-is-too-short-or-too-long" class="headerlink" title="The review is too short or too long"></a>The review is too short or too long</h4><p>Here is the distribution for the sentence length of <strong>useful reviews.</strong><br><img src="https://raw.githubusercontent.com/Windsooon/Comments/master/img/useful.png" alt="useful length"></p>
<p>And the distribution for the sentence length of <strong>useless reviews.</strong><br><img src="https://raw.githubusercontent.com/Windsooon/Comments/master/img/useless.png" alt="useful length"></p>
<p>After calculation, I found that 99.5% of the length of the useful reviews are between (10, 465). So I set the reviews out of the range to be useless.</p>
<p><img src="https://raw.githubusercontent.com/Windsooon/Comments/master/img/long_or_short.png" alt="random guess"></p>
<h4 id="Grammar-problem"><a href="#Grammar-problem" class="headerlink" title="Grammar problem"></a>Grammar problem</h4><p>I use a POS matrix which contains the transition probability between all kind of POS. For instance, the probability from adj to n is 10%. I calculated the probability after tokenizer the review. If it is too small then what expected, we mark this review has grammatical errors. Here is the distribution for useful and useless reviews. </p>
<p><img src="https://raw.githubusercontent.com/Windsooon/Comments/master/img/pro.png" alt="useful_pro"></p>
<p><img src="https://raw.githubusercontent.com/Windsooon/Comments/master/img/pro_less.png" alt="useless_pro"></p>
<p>Unfortunately, when I labeled the reviews I only labeled useful and useless instead of useful, useless, grammatical errors, ads so this method didn’t help at all. But if we correctly labeled the reviews, I’m sure we can benefit from it.</p>
<h4 id="Ads-1"><a href="#Ads-1" class="headerlink" title="Ads"></a>Ads</h4><p>We use Naive Bayes to detect ads, we use pkuseg to tokenizer and MultinomialNB in sklearn.<br><img src="https://raw.githubusercontent.com/Windsooon/Comments/master/img/native_bayes.png" alt="native_bayes"></p>
<h4 id="Combine-all-of-them"><a href="#Combine-all-of-them" class="headerlink" title="Combine all of them"></a>Combine all of them</h4><p>If we use multiple algorithms together, we can get a better result.</p>
<p><img src="https://raw.githubusercontent.com/Windsooon/Comments/master/img/hybrid.png" alt="hybrid"></p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Base on our current implementation, we helped Apple detected<br>There are lots of other methods to detect useless reviews. </p>
</div></article></div></section><footer><div class="paginator"><a href="/2019/08/14/How Python read or write files under the hood/" class="prev">PREV</a><a href="/2019/06/13/A crash course in computer Cache/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'windsonYang';
var disqus_identifier = '2019/08/13/Anti-Spam reviews in App Store/';
var disqus_title = 'Anti Spam reviews in App store';
var disqus_url = 'https://windsooon.github.io/2019/08/13/Anti-Spam reviews in App Store/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//windsonYang.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 - 2019 <a href="https://windsooon.github.io">Unicooo</a>, unless otherwise noted.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>